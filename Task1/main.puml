C4Container
    @startuml Архитектура_АгроТех_Системы_v4

!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

' === Участники ===
Person(зоотехник, "Зоотехник", "Следит за животными")
Person(директор, "Директор хозяйства", "Управление через веб-портал")
Person(механик, "Механик", "Мониторинг техники")
Person(дежурный_оператор, "Дежурный оператор", "Управление оффлайн-уведомлениями")

System_Boundary(mvp_границы, "Границы MVP для ферм") {
    ' === Внутренние системы ===
    System(mvp_платформа, "MVP Платформа Мониторинга Скота", "Центральный сервер + агенты на фермах", "Микросервисная архитектура с видеоаналитикой и IoT")
    ' === Внешние системы ===
    System_Ext(агенты_фермы, "Агенты на фермах", "Edge-устройства (камеры, датчики)", "Оффлайн-работа с кешированием")
    System_Ext(api_client, "Мобильное/Веб-приложение", "Для ролей/аутентификации", "REST API")
}
' === Внутренние системы ===
System(аграрная_платформа, "АгроПром Х - Цифровая платформа", "Центральная аграрная платфома", "Микросервисная архитектура")

' === Взаимосвязи ===
Rel(директор, mvp_платформа, "Использует", "Отслеживает показатели фермы")
Rel(зоотехник, mvp_платформа, "Использует", "Мониторинг и оповещение (беспокойство, болезнь)", "Push + SMS")
Rel(механик, mvp_платформа, "Мониторит", "Проверяет состояние оборудования")
Rel(дежурный_оператор, mvp_платформа, "Контролирует", "Локальные оповещения (оффлайн)")
Rel_D(mvp_платформа, аграрная_платформа, "Передача метрик (поголовье, запасы, фильтрация воды)", "Kafka Protocol")
Rel(mvp_платформа, агенты_фермы, "Синхронизация данных (видео/IoT, до 10 мин)", "MQTT/HTTPS")
Rel(агенты_фермы, mvp_платформа, "Видео аналитика (поведение, задавливание)", "Реал-тайм (<5 сек)")
Rel(mvp_платформа, api_client, "Доступ к данным", "OAuth/JWT").
@enduml